System.register(["./p-3369a689.system.js","./p-d7fc1715.system.js","./p-fa4e7901.system.js","./p-44df65c4.system.js","./p-48004ded.system.js"],(function(e){"use strict";var t,n,r,o,i;return{setters:[function(e){t=e.r;n=e.h;r=e.g},function(){},function(){},function(e){o=e.T},function(e){i=e.C}],execute:function(){var a="@event:";var s=function(){function e(){}e._prepareRoutesTree=function(e,t){var n=function(e){var r={};e.forEach((function(e){var o=e.name.replace(/(\s+|-)/g,"").toLowerCase();if(!r[o]){var i=e.path;switch(t){case"browser":case"query":i=e.path;break;case"hash":i="/#"+e.path;break}r[o]={path:i}}if(typeof e.children==="object"&&Array.isArray(e.children.items)){r[o].children={type:"known",items:n(e.children.items)}}else if(typeof e.children==="string"&&e.children.indexOf(a)===0){var s=e.children.substring(a.length);r[o].children={type:"event",event:s}}}));return r};return n(e)};e._prepareConfiguration=function(t,n){var r={};r.baseUrl=n;var o=n+t.basePagesUrl;if(t.modals){r.modals={};if(Object.keys(t.modals).length){for(var i in t.modals){r.modals[i]=o+t.modals[i]}}}if(!t.menu||!t.menu.defaultMenuConfig){throw new Error("Default menu configuration is missing")}var s=t.menu.defaultMenuConfig;if(t.profile){r.profile=t.profile}var c=function(e){for(var t=0;t<e.length;t++){if(e[t].children&&e[t].children.items){c(e[t].children.items)}else{if(typeof e[t].indexed!=="undefined"&&e[t].indexed.toString()==="false"){e.splice(t,1)}}}return e};var p=function(e,t){e.forEach((function(e){if(!e.path){var n=e.name.toLowerCase();var r=n.toLowerCase().replace(/\s+/g,"-");r=r.replace(/[:\/]/g,"");e.path=r}if(e.path.indexOf("/")!==0){e.path="/"+e.path}if(t){e.path=t+e.path}if(e.children){e.type="abstract";if(!e.icon){e.icon=s.icon}}else{for(var i in s){if(!e.hasOwnProperty(i)){e[i]=s[i]}}if(e.component==="psk-page-loader"){if(!e.componentProps){e.componentProps={}}Object.assign(e.componentProps,e.options);if(e.pageSrc){if(e.pageSrc.startsWith("http")){e.componentProps.pageUrl=e.pageSrc}else{e.componentProps.pageUrl=o+e.pageSrc}}else{var c=e.name.replace(/[:.!?]/g,"").replace(/\s/g,"-").toLowerCase();var f="";if(t){f=t.replace(/^\//,"")}e.componentProps.pageUrl=o+f+"/"+c+".html"}}}if(typeof e.children==="object"&&Array.isArray(e.children)){e.children={type:"known",items:JSON.parse(JSON.stringify(e.children))};p(e.children.items,e.path)}else{if(typeof e.children==="string"&&e.children.indexOf(a)==0){var l=e.children.substring(a.length);e.children={type:"event",event:l};e.component="psk-ssapp-loader"}}}));return e};r.routes=p(t.menu.pages);r.historyType="browser";var f=t.menu.defaultMenuConfig.historyType;if(f==="hash"||f==="query"){r.historyType=f}if(f==="query"){var l="?";if(t.menu.defaultMenuConfig.pagePrefix){l=t.menu.defaultMenuConfig.pagePrefix}var d=function(e){e.forEach((function(e){var t=e.path;if(t.indexOf("/")===0){t=t.substr(1)}e.path=""+l+t;if(e.children){d(e.children.items)}}))};d(r.routes)}var u=function(e){var t=[];function n(e){e.forEach((function(e){if(Object.prototype.hasOwnProperty.call(e,"tags")){var r=e["tags"].split(",").map((function(e){return e.trim()}));r.forEach((function(n){t[n]=e.path}))}if(typeof e.children==="object"&&Array.isArray(e.children.items)){n(e.children.items)}}))}n(e);return t};var h=JSON.parse(JSON.stringify(r.routes));r.menu=c(h);r.tags=u(h);r.pagesHierarchy=e._prepareRoutesTree(r.routes,f);return r};return e}();var c="/app-config.json";window.globalConfig={};var p=function(){function e(e){var t=this;this.configIsLoaded=false;this.pendingRequests=[];this._getAppConfiguration(c,(function(e,n){var r;if(window&&window.location&&window.location.origin){r=window.location.origin}else{r=n.baseUrl}t.configuration=s._prepareConfiguration(n,r);t.configuration.theme=n.theme;t.configuration.appVersion=n.appVersion;t.configIsLoaded=true;while(t.pendingRequests.length){var o=t.pendingRequests.pop();if(!t.configuration[o.configName]){throw new Error("Config "+o.configName+" was not provided")}o.callback(null,t.configuration[o.configName])}}));e.addEventListener("getThemeConfig",this._provideConfig("theme"));e.addEventListener("getAppVersion",this._provideConfig("appVersion"));e.addEventListener("needRoutes",this._provideConfig("routes"));e.addEventListener("needMenuItems",this._provideConfig("menu"));e.addEventListener("getUserInfo",this._provideConfig("profile"));e.addEventListener("getHistoryType",this._provideConfig("historyType"));e.addEventListener("getModals",this._provideConfig("modals"));e.addEventListener("getTags",this._provideConfig("tags"));e.addEventListener("validateUrl",(function(e){e.stopImmediatePropagation();var n=e.detail,r=n.sourceUrl,o=n.callback;if(o&&typeof o==="function"){t._parseSourceUrl(r,o)}else{console.error("Callback was not properly provided!")}}))}e.prototype._provideConfig=function(e){var t=this;return function(n){n.stopImmediatePropagation();var r=n.detail;if(r&&typeof r==="function"){if(t.configIsLoaded){if(!t.configuration[e]){throw new Error("Config "+e+" was not provided")}r(undefined,t.configuration[e])}else{t.pendingRequests.push({configName:e,callback:r})}}}};e.prototype._parseSourceUrl=function(e,t){e=e.replace(/(\s+|-)/g,"").toLowerCase();var n=e.split("/");var r=this.configuration.pagesHierarchy;var o=function(o){var i=n[o];var a=Object.keys(r).find((function(e){return r[e].path.toLowerCase().indexOf(i)!==-1}));var s=typeof r[a]!=="undefined";if(!r[i]&&!s){t(e+" is not a valid path in the application!");return"break"}var c=void 0;if(s){c=r[a].children}else{c=r[i].children}if(typeof c==="object"&&typeof c.items==="object"&&o!==n.length){r=c.items;return"continue"}var p=void 0;if(s){p=r[a].path}else{p=r[i].path}return{value:t(undefined,p)}};for(var i=0;i<n.length;i++){var a=o(i);if(typeof a==="object")return a.value;if(a==="break")break}};e.prototype._getAppConfiguration=function(e,t){var n=new XMLHttpRequest;n.open("GET",e);n.onload=function(){if(n.status!=200){t(new Error(n.status.code))}else{var e=JSON.parse(n.responseText);t(null,e)}};n.onerror=function(){t(new Error("An error occurred"))};n.send()};return e}();var f=undefined&&undefined.__decorate||function(e,t,n,r){var o=arguments.length,i=o<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,n):r,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)if(a=e[s])i=(o<3?a(i):o>3?a(t,n,i):a(t,n))||i;return o>3&&i&&Object.defineProperty(t,n,i),i};var l=e("psk_app_root",function(){function e(e){t(this,e);this.mobileLayout=false;this.componentCode="";this.hasSlot=false}e.prototype.__createLoader=function(){var e=12;var t="";for(var n=1;n<=e;n++){t+='<div class="sk-circle'+n+' sk-circle"></div>'}var r=document.createElement("div");r.className="app-loader";r.innerHTML="<div class='sk-fading-circle'>"+t+"</div>";return r};e.prototype.connectedCallback=function(){this.disconnected=false};e.prototype.disconnectedCallback=function(){this.disconnected=true};e.prototype.componentWillLoad=function(){var e=this;if(this.host.parentElement){this.htmlLoader=this.__createLoader();this.host.parentElement.appendChild(this.htmlLoader)}var t=this.host.innerHTML;t=t.replace(/\s/g,"");if(t.length){this.hasSlot=true}if(typeof this.controller==="string"){return new Promise((function(t,n){i.getController(e.controller).then((function(n){if(e.disconnected){return t()}new n(e.host);t()})).catch(n)}))}else{new p(this.host)}};e.prototype.componentDidLoad=function(){if(this.htmlLoader&&this.htmlLoader.parentNode){this.htmlLoader.parentNode.removeChild(this.htmlLoader)}};e.prototype.render=function(){var e="psk-default-renderer";return this.hasSlot?n("slot",null):n(e,null)};Object.defineProperty(e.prototype,"host",{get:function(){return r(this)},enumerable:true,configurable:true});return e}());f([o({isMandatory:false,description:["This property is a string that will permit the developer to choose his own controller.","If no controller is provided, a default controller will be passed to the component","It is recommended that each app to extend the provided default controller and adapt it to the application needs"],propertyType:"string",defaultValue:"null"})],l.prototype,"controller",void 0)}}}));