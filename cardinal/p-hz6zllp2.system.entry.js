System.register(["./p-3369a689.system.js","./p-d7fc1715.system.js","./p-fa4e7901.system.js","./p-44df65c4.system.js","./p-48004ded.system.js"],(function(e){"use strict";var t,r,n,o,i;return{setters:[function(e){t=e.r;r=e.h;n=e.g},function(){},function(){},function(e){o=e.T},function(e){i=e.C}],execute:function(){var a="@event:";var s=function(){function e(){}e._prepareRoutesTree=function(e,t){var r=function(e){var n={};e.forEach((function(e){var o=e.name.replace(/(\s+|-)/g,"").toLowerCase();if(!n[o]){var i=e.path;switch(t){case"browser":case"query":i=e.path;break;case"hash":i="/#"+e.path;break}n[o]={path:i}}if(typeof e.children==="object"&&Array.isArray(e.children.items)){n[o].children={type:"known",items:r(e.children.items)}}else if(typeof e.children==="string"&&e.children.indexOf(a)===0){var s=e.children.substring(a.length);n[o].children={type:"event",event:s}}}));return n};return r(e)};e._prepareConfiguration=function(t,r){var n={};n.baseUrl=r;var o=r+t.basePagesUrl;if(t.modals){n.modals={};if(Object.keys(t.modals).length){for(var i in t.modals){n.modals[i]=o+t.modals[i]}}}if(!t.menu||!t.menu.defaultMenuConfig){throw new Error("Default menu configuration is missing")}var s=t.menu.defaultMenuConfig;if(t.profile){n.profile=t.profile}var c=function(e){for(var t=0;t<e.length;t++){if(e[t].children&&e[t].children.items){c(e[t].children.items)}else{if(typeof e[t].indexed!=="undefined"&&e[t].indexed.toString()==="false"){e.splice(t,1)}}}return e};var p=function(e,t){e.forEach((function(e){if(!e.path){var r=e.name.toLowerCase();var n=r.toLowerCase().replace(/\s+/g,"-");n=n.replace(/[:\/]/g,"");e.path=n}if(t){e.path=t+"/"+e.path}else{if(e.path.indexOf("/")!==0){e.path="/"+e.path}}if(e.children){e.type="abstract";if(!e.icon){e.icon=s.icon}}else{for(var i in s){if(!e.hasOwnProperty(i)){e[i]=s[i]}}if(e.component==="psk-page-loader"){if(!e.componentProps){e.componentProps={}}Object.assign(e.componentProps,e.options);if(e.pageSrc){if(e.pageSrc.startsWith("http")){e.componentProps.pageUrl=e.pageSrc}else{e.componentProps.pageUrl=o+e.pageSrc}}else{var c=e.name.replace(/[:.!?]/g,"").replace(/\s/g,"-").toLowerCase();var f="";if(t){f=t.replace(/^\//,"")}e.componentProps.pageUrl=o+f+"/"+c+".html"}}}if(typeof e.children==="object"&&Array.isArray(e.children)){e.children={type:"known",items:JSON.parse(JSON.stringify(e.children))};p(e.children.items,e.path)}else{if(typeof e.children==="string"&&e.children.indexOf(a)==0){var l=e.children.substring(a.length);e.children={type:"event",event:l};e.component="psk-ssapp-loader"}}}));return e};n.routes=p(t.menu.pages);n.historyType="browser";var f=t.menu.defaultMenuConfig.historyType;if(f==="hash"||f==="query"){n.historyType=f}if(f==="query"){var l="?";if(t.menu.defaultMenuConfig.pagePrefix){l=t.menu.defaultMenuConfig.pagePrefix}var d=function(e){e.forEach((function(e){var t=e.path;if(t.indexOf("/")===0){t=t.substr(1)}e.path=""+l+t;if(e.children){d(e.children.items)}}))};d(n.routes)}var u=function(e){var t=[];function r(e){e.forEach((function(e){if(Object.prototype.hasOwnProperty.call(e,"keyword")){t[e["keyword"]]=e.path}if(typeof e.children==="object"&&Array.isArray(e.children.items)){r(e.children.items)}}))}r(e);return t};var h=JSON.parse(JSON.stringify(n.routes));n.menu=c(h);n.keywords=u(h);n.pagesHierarchy=e._prepareRoutesTree(n.routes,f);return n};return e}();var c="/app-config.json";var p=function(){function e(e){var t=this;this.configIsLoaded=false;this.pendingRequests=[];this._getAppConfiguration(c,(function(e,r){var n;if(window&&window.location&&window.location.origin){n=window.location.origin}else{n=r.baseUrl}t.configuration=s._prepareConfiguration(r,n);t.configIsLoaded=true;while(t.pendingRequests.length){var o=t.pendingRequests.pop();if(!t.configuration[o.configName]){throw new Error("Config "+o.configName+" was not provided")}o.callback(null,t.configuration[o.configName])}}));e.addEventListener("needRoutes",this._provideConfig("routes"));e.addEventListener("needMenuItems",this._provideConfig("menu"));e.addEventListener("getUserInfo",this._provideConfig("profile"));e.addEventListener("getHistoryType",this._provideConfig("historyType"));e.addEventListener("getModals",this._provideConfig("modals"));e.addEventListener("getKeywords",this._provideConfig("keywords"));e.addEventListener("validateUrl",(function(e){e.stopImmediatePropagation();var r=e.detail,n=r.sourceUrl,o=r.callback;if(o&&typeof o==="function"){t._parseSourceUrl(n,o)}else{console.error("Callback was not properly provided!")}}))}e.prototype._provideConfig=function(e){var t=this;return function(r){r.stopImmediatePropagation();var n=r.detail;if(n&&typeof n==="function"){if(t.configIsLoaded){if(!t.configuration[e]){throw new Error("Config "+e+" was not provided")}n(undefined,t.configuration[e])}else{t.pendingRequests.push({configName:e,callback:n})}}}};e.prototype._parseSourceUrl=function(e,t){e=e.replace(/(\s+|-)/g,"").toLowerCase();var r=e.split("/");var n=this.configuration.pagesHierarchy;var o=function(o){var i=r[o];var a=Object.keys(n).find((function(e){return n[e].path.toLowerCase().indexOf(i)!==-1}));var s=typeof n[a]!=="undefined";if(!n[i]&&!s){t(e+" is not a valid path in the application!");return"break"}var c=void 0;if(s){c=n[a].children}else{c=n[i].children}if(typeof c==="object"&&typeof c.items==="object"&&o!==r.length){n=c.items;return"continue"}var p=void 0;if(s){p=n[a].path}else{p=n[i].path}return{value:t(undefined,p)}};for(var i=0;i<r.length;i++){var a=o(i);if(typeof a==="object")return a.value;if(a==="break")break}};e.prototype._getAppConfiguration=function(e,t){var r=new XMLHttpRequest;r.open("GET",e);r.onload=function(){if(r.status!=200){t(new Error(r.status.code))}else{var e=JSON.parse(r.responseText);t(null,e)}};r.onerror=function(){t(new Error("An error occurred"))};r.send()};return e}();var f=undefined&&undefined.__decorate||function(e,t,r,n){var o=arguments.length,i=o<3?t:n===null?n=Object.getOwnPropertyDescriptor(t,r):n,a;if(typeof Reflect==="object"&&typeof Reflect.decorate==="function")i=Reflect.decorate(e,t,r,n);else for(var s=e.length-1;s>=0;s--)if(a=e[s])i=(o<3?a(i):o>3?a(t,r,i):a(t,r))||i;return o>3&&i&&Object.defineProperty(t,r,i),i};var l=e("psk_app_root",function(){function e(e){t(this,e);this.mobileLayout=false;this.componentCode="";this.hasSlot=false}e.prototype.__createLoader=function(){var e=12;var t="";for(var r=1;r<=e;r++){t+='<div class="sk-circle'+r+' sk-circle"></div>'}var n=document.createElement("div");n.className="app-loader";n.innerHTML="<div class='sk-fading-circle'>"+t+"</div>";return n};e.prototype.connectedCallback=function(){this.disconnected=false};e.prototype.disconnectedCallback=function(){this.disconnected=true};e.prototype.componentWillLoad=function(){var e=this;if(this.host.parentElement){this.htmlLoader=this.__createLoader();this.host.parentElement.appendChild(this.htmlLoader)}var t=this.host.innerHTML;t=t.replace(/\s/g,"");if(t.length){this.hasSlot=true}if(typeof this.controller==="string"){return new Promise((function(t,r){i.getController(e.controller).then((function(r){if(e.disconnected){return t()}new r(e.host);t()})).catch(r)}))}else{new p(this.host)}};e.prototype.componentDidLoad=function(){if(this.htmlLoader&&this.htmlLoader.parentNode){this.htmlLoader.parentNode.removeChild(this.htmlLoader)}};e.prototype.render=function(){var e="psk-default-renderer";return this.hasSlot?r("slot",null):r(e,null)};Object.defineProperty(e.prototype,"host",{get:function(){return n(this)},enumerable:true,configurable:true});return e}());f([o({isMandatory:false,description:["This property is a string that will permit the developer to choose his own controller.","If no controller is provided, a default controller will be passed to the component","It is recommended that each app to extend the provided default controller and adapt it to the application needs"],propertyType:"string",defaultValue:"null"})],l.prototype,"controller",void 0)}}}));