import{r as t,h as e,g as i}from"./p-2eb42df6.js";import{c as o,b as s}from"./p-7745c6f7.js";import"./p-5c62ed62.js";import{T as r}from"./p-43fec8b7.js";import{_ as n,B as h}from"./p-79d5f422.js";var l=function(t,e,i,o){var s,r=arguments.length,n=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,i):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,o);else for(var h=t.length-1;h>=0;h--)(s=t[h])&&(n=(r<3?s(n):r>3?s(e,i,n):s(e,i))||n);return r>3&&n&&Object.defineProperty(e,i,n),n};const a=class{constructor(e){t(this,e),this.modelChanged=!1,this.ignoredNodeNames=["link","style","slot","#text","#comment","text","comment"],this.templateNodes=[],this.dataViewModel=null}componentWillLoad(){let t=Array.from(this.__host.childNodes).filter(t=>-1===this.ignoredNodeNames.indexOf(t.nodeName.toLowerCase())),e=t.filter(t=>!t.hasAttribute("slot")),i=t.find(t=>t.hasAttribute("slot")&&"no-data"===t.getAttribute("slot"));i&&(i.removeAttribute("slot"),this.emptyNode=i.cloneNode(!0)),this.__host.innerHTML="",e?e.forEach(t=>{this.templateNodes.push(t.cloneNode(!0))}):console.error("No template found!")}componentDidLoad(){this.rootModel&&this.rootModel.onChange(this.parentChain,()=>{this.modelChanged=!this.modelChanged})}render(){if(!this.rootModel||!this.parentChain)return null;if(!this.templateNodes)return null;let t=this.rootModel.getChainValue(this.parentChain);t||(t=[]);let i=[];for(let o=0;o<t.length;o++){let t=this.parentChain?`${this.parentChain}.${o}.`:`${o}.`,s=[];this.templateNodes.forEach(i=>{let o=i.cloneNode(!0),r=this.prepareItem(t,o),n=r.tagName.toLowerCase(),h={};r.getAttributeNames().forEach(t=>{h[t]=r.getAttribute(t)});let l=e(n,Object.assign({innerHTML:r.innerHTML},h));s.push(l)}),i.push(s)}return 0===i.length&&this.emptyNode?e("div",{innerHTML:this.emptyNode.outerHTML}):i}__updateDisplayConditionals(t,e){const i=t.getAttribute(o),r=t.getAttribute(s);i&&t.setAttribute(o,`${e}${i.trim()}`),r&&t.setAttribute(s,`${e}${r.trim()}`)}__processNode(t,e){if(this.__updateDisplayConditionals(t,e),!n(this.rootModel,t))return void t.setAttribute("data-hide","hide");let i=Array.from(t.attributes).filter(t=>t.name.startsWith("view-model-"));i.forEach(i=>{const o=i.name.split("view-model-")[1];t.setAttribute(o,this.rootModel.getChainValue(e?`${e}${i.value}`:i.value))}),(i=Array.from(t.attributes).filter(t=>t.value.startsWith("@"))).forEach(i=>{const o=i.value.split("@")[1];t.setAttribute(i.name,this.rootModel.getChainValue(e?`${e}${o}`:o))}),Array.from(t.children).forEach(t=>{this.__processNode.call(this,t,e)})}prepareItem(t,e){let i=e.querySelectorAll("[view-model]");return this.__processNode.call(this,e,t),i.forEach(e=>{const i=`${t}${e.getAttribute("view-model")}`;e.setAttribute("view-model",i)}),e}get __host(){return i(this)}};l([h()],a.prototype,"__host",void 0),l([r({description:["This property is the name of the model which will be used to generate the form. The model should be a JavaScript array.",'All the information about how to write a model, hot to use the two-way binding and how to use the model with this component cand be found in the documentation found at: <psk-link page="forms/using-forms">Using forms</psk-link>'],isMandatory:!0,propertyType:"string",specialNote:["If this property is not provided, nothing written inside the component's template will be displayed."]})],a.prototype,"dataViewModel",void 0);export{a as psk_for_each};